<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR Desk</title>
    <link rel="stylesheet" href="../../styles/main.css">
    <link rel="stylesheet" href="../../styles/icons.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flatpickr/4.6.13/flatpickr.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
</head>
<body>
    <div class="app-container">
        <!-- 側邊欄 -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h2>QR Desk</h2>
            </div>
            <nav class="sidebar-nav">
                <button class="nav-item active" data-page="home">
                    <span class="icon">
                        <img src="../../assets/house.svg" alt="主頁" class="settings-svg" width="16" height="16">
                    </span>
                    主頁
                </button>
                <button class="nav-item" data-page="settings">
                    <span class="icon">
                        <img src="../../assets/setting.svg" alt="設定" class="settings-svg" width="16" height="16">
                    </span>
                    設定
                </button>
            </nav>
        </div>

        <!-- 主要內容區域 -->
        <div class="main-content">
            <!-- 主頁內容 -->
            <div class="page" id="home-page">
                <div class="page-header">
                    <h1>掃描紀錄</h1>
                    <button id="screenshot-btn" class="primary-btn">
                        開始掃描
                    </button>
                </div>

                <!-- 搜尋與篩選 -->
                <div class="search-section">
                    <div class="search-bar">
                        <input type="text" id="search-input" placeholder="搜尋掃描結果...">
                    </div>
                    <div class="date-filter">
                        <input type="text" id="date-range" placeholder="選擇日期範圍">
                        <button id="clear-filter" class="secondary-btn">清除篩選</button>
                    </div>
                </div>

                <!-- 掃描紀錄列表 -->
                <div class="records-section">
                    <div id="records-list" class="records-list">
                        <!-- 動態載入內容 -->
                    </div>
                    
                    <!-- 分頁控制 -->
                    <div class="pagination">
                        <button id="first-page" class="page-btn">
                            <i class="fa-solid fa-backward-step fa-lg"></i>
                        </button>
                        <button id="prev-page" class="page-btn">
                            <i class="fa-solid fa-caret-left fa-xl"></i>
                        </button>
                        <span id="page-info" class="page-info">第 1 頁，共 1 頁</span>
                        <button id="next-page" class="page-btn">
                            <i class="fa-solid fa-caret-right fa-xl"></i>
                        </button>
                        <button id="last-page" class="page-btn">
                            <i class="fa-solid fa-forward-step fa-lg"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- 設定頁內容 -->
            <div class="page hidden" id="settings-page">
                <div class="page-header">
                    <h1>設定</h1>
                </div>

                <div class="settings-section">
                    <!-- 開機啟動 -->
                    <div class="setting-group">
                        <h3>開機啟動</h3>
                        <label class="checkbox-label">
                            <input type="checkbox" id="auto-launch">
                            <span class="checkmark"></span>
                            開機時自動啟動程式
                        </label>
                    </div>

                    <!-- 退出模式 -->
                    <div class="setting-group">
                        <h3>退出模式</h3>
                        <label class="checkbox-label">
                            <input type="checkbox" id="exit-to-tray">
                            <span class="checkmark"></span>
                            關閉視窗時隱藏到系統托盤（不勾選直接退出）
                        </label>
                    </div>

                    <!-- 快捷鍵設定 -->
                    <div class="setting-group">
                        <h3>快捷鍵設定</h3>
                        <div class="shortcut-setting">
                            <label for="shortcut-input">截圖快捷鍵：</label>
                            <input type="text" id="shortcut-input" class="shortcut-input" placeholder="點擊此處並按下快捷鍵組合" readonly>
                        </div>
                    </div>

                    <!-- 主題設定 -->
                    <div class="setting-group">
                        <h3>主題設定</h3>
                        <div class="theme-setting">
                            <label class="radio-label">
                                <input type="radio" name="theme" value="system" checked>
                                <span class="radio-mark"></span>
                                跟隨系統
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="theme" value="light">
                                <span class="radio-mark"></span>
                                淺色模式
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="theme" value="dark">
                                <span class="radio-mark"></span>
                                深色模式
                            </label>
                        </div>
                    </div>

                    <!-- 操作按鈕 -->
                    <div class="setting-actions">
                        <!-- 儲存設定按鈕已移除，設定即時生效 -->
                        <button id="reset-settings" class="secondary-btn">重設為預設值</button>
                        <button id="clear-records" class="danger-btn">刪除所有紀錄</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 載入提示 -->
    <div id="loading" class="loading hidden">
        <div class="loading-content">
            <div class="spinner"></div>
            <p>處理中...</p>
        </div>
    </div>

    <!-- 通知訊息 -->
    <div id="notification" class="notification hidden">
        <span id="notification-message"></span>
        <button id="notification-close">✕</button>
    </div>

    <!-- 自訂對話框 -->
    <div id="custom-dialog" class="dialog-overlay hidden">
        <div class="dialog-box">
            <div class="dialog-header">
                <h3 id="dialog-title">確認</h3>
            </div>
            <div class="dialog-content">
                <p id="dialog-message">您確定要執行此操作嗎？</p>
            </div>
            <div class="dialog-actions">
                <button id="dialog-confirm" class="primary-btn">確認</button>
                <button id="dialog-cancel" class="secondary-btn">取消</button>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/flatpickr/4.6.13/flatpickr.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flatpickr/4.6.13/l10n/zh-tw.js"></script>
    <!-- 主程式 (ES Module) -->
    <script type="module" src="app.js"></script>
</body>
</html>
